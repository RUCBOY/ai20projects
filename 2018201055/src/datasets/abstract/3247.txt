A method has been developed for the analysis of three dimensional (3D) electron optical components using the finite difference method. Electrodes, dielectric materials (including any applied surface charge distributions), and ferromagnetic materials of quite general 3D shapes including the coil windings can all be analyzed in a unified way. The new finite difference equations have been derived in full mathematical detail.
The method has been implemented in a suite of computer programs which have been developed and run on a desktop or laptop personal computer. This has necessitated making the software as fast and memory efficient as possible. The programs compute the 3D electric and magnetic field distributions, perform direct electron ray-tracing through the combined fields and provide graphical output of the fields and trajectories. 
The accuracy of the software has been established by various analytic tests and comparisons with existing software. Computed fields in round electron lenses compared favorably with those from rotationally symmetric finite element analyses. Tolerances for lens electrode machining errors agreed to within a few percent with the results of a perturbation analysis. Optical properties for electrostatic and magnetic lenses have been computed by direct ray-tracing using the 3D programs and the results compared with those from 2D programs using a paraxial ray-trace and aberration integrals. In all cases the agreement is good.
Examples which highlight the effectiveness of the programs as a design tool have been presented. These include: 3D aspects of photomultiplier tube design, with specific examples in the photocathode region and the dynode stack; magnetic immersion lenses for a scanning electron microscope (SEM), which allow specimen access into the lenses via side slots; surface charging effects which occur during inspection of insulating specimens in the SEM and a simulation of the line scan; a Wien filter for monochromating an electron beam; and a combined electric and magnetic focussing and deflection system in the presence of stray 3D fields. 
It has been shown, therefore, that complicated 3D analyses of a variety of electron optical components can be performed to a high degree of accuracy on the new generation of small personal or portable microcomputers. This provides designers of electron beam equipment with a relatively cheap and convenient design tool.
