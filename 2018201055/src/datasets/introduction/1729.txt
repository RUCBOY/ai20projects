Body condition of cattle is determined by the energy balance of the animals and depends on various reasons such as type of diet, feed efficiency and stocking rate on farms. Significant variation in body condition means a metabolic failure owing to disorder, illness, or improper management (Rathbun et al., 2017). Therefore, farmers should regularly assess the animal body condition to prevent these problems. Body condition is commonly determined by qualified assessors through visual inspection and palpation of animal body parts. The quality of such manual scoring depends on the experience of assessors. So, regular manual scoring on farms with qualified assessors is time-consuming, labor intensive and expensive. Nowadays, automated body scoring methods utilizing inexpensive sensors and machine vision techniques are often used instead of the expensive manual assessment.
In the last decade, many agricultural 3-D vision systems based on optical 2-D and 3-D sensors have been proposed. The advantages and disadvantages of the systems and vision techniques are described in detail by Vázquez-Arellano et al. (2018). Three-dimensional data is a collection of distance measurements from a known reference coordinate system to the surface points on scene objects. Three-dimensional image generation techniques such as triangulation and time-of-flight (TOF) are commonly used to retrieve depth information from 3-D data. Let us recall the most practical approaches to 3-D reconstruction in animal husbandry. Based on triangulation, the stereo vision system is robust enough for outdoor applications. Drawbacks of the system are as follows: low texture produces serious correspondence problems; depth range is highly dependent on the baseline distance; it is susceptible to direct sunlight; and it is computationally expensive. Another triangulation-based approach is structure-from-motion (SfM) (Pezzuolo et al., 2018b). It is a range imaging technique that estimates a three-dimensional structure based on a series of 2-D images captured at different perspectives around an object. The visual system based on this technique is low cost and appropriate for outdoor applications. However, it is not suitable for real-time applications owing to time-consuming generation of the point cloud, requires a lot of experience for obtaining good raw data, and is sensitive to direct sunlight. Note that there is a fundamental limitation in the above approaches; that is, depth information is lost when projecting from the 3-D world onto the 2-D imaging surface. Therefore, they always face natural problems such as occlusion, as well as changes in the position and appearance of the animal in different 2-D images due to its mobility.
Modern TOF cameras based on continuous wave modulation, such as Microsoft Kinect v2, have active illumination independent of external light source, are able to acquire data in low light conditions and provide RGB-D stream. Their limitations are as follows: small field of view, low pixel resolution and poor measurement range (up to 3 m), as well as sensitivity to direct sunlight. Kinect v2 creates a depth-map using a time-of-flight algorithm by analyzing infrared images of objects on which it projects a dense, non-uniform array of infrared dots. However, the presence of sunlight saturates the infrared image to such an extent that the projected depth map is almost impossible to recover, resulting in poor outdoor performance. Note that sunlight differs from indoor light in several aspects; that is, the spectrum of sunlight changes over time and the overall light intensity varies as well due to cloudiness and the angle of incidence. Indoor lighting is relatively moderate and stable in intensity as it can be controlled with diffused light bulbs. Therefore, 3-D visual systems based on Kinect v2 cameras are suitable for indoor real-time livestock applications.
A single camera views fewer body regions than those assessed by manual scoring and has its own disadvantages and advantages. Thus, fusion of information from additional cameras located at different viewpoints provides more reliable performance depending on the application. Research by Tasdemir et al. (2011) focused on the use of cheap RGB CCD cameras. Recent studies have shown the feasibility of using multiple 3-D cameras to record the entire body surface of a cow (Guo et al., 2017, Salau et al., 2017a). The use of 3-D imaging systems opens up additional opportunities for improvement of computer-based scoring; i.e., one CCD camera and one 3-D camera (Viazzi et al., 2014), only one 3-D camera (Van Hertem et al., 2018, Kuzuhara et al., 2015), two 3-D cameras (Guo et al., 2017), three 3-D cameras (Kawasue et al., 2017, Pezzuolo et al., 2018a), and four 3-D cameras (Salau et al., 2017a, Salau et al., 2017b). In addition, high-precision and expensive laser cameras (Cozler et al., 2019) can be also used for 3-D shape analysis of the animal’s body. For constructing a three-dimensional model of the animal’s body, three scenarios of the measurement system are considered: 1) several cameras are fixed on a platform moving along a known trajectory around the animal (Cozier et al., 2019) (the camera position and simplified operation scheme of all algorithmic components of the system are known); 2) camera is in the hands of a person walking around the animal (Guo et al., 2017, Kuzuhara et al., 2015) (real measurement situation in a field); 3) several cameras installed on a platform around the gate simultaneously capture RGB-D data about an animal passing through the gate (Viazzi et al., 2014, Van Hertem et al., 2018) (real indoor measurement situation).
We suppose that a precise 3-D model of the animal’s body can be constructed using multiple 3-D cameras, and computer scoring based on the features of all body regions calculated from the model can speed up and improve the quality of manual assessment.. Computer vision is often used as a non-contact and cheap way to control behavior and extract group and individual features of animals. One of the main goals in livestock automation research is the design computer vision systems on a commercial farm. Currently, there are many different types of methods that can be used in commercially-applicable technologies for detection of feeding (Nasirahmadi et al., 2017), lactation (Zheng et al., 2018), locomotion (Van Hertern et al., 2018), lying (MacKay et al., 2012), recognition (Kumar et al., 2017, Okura et al., 2019), aggressive and reproductive behavior of cattle (Nasirahmadi et al., 2017).
Basically, during the design of a three-dimensional system for automatic measurement of animal features, the following issues are usually taken into account: ensuring a specified accuracy of feature measurement (important for body condition scoring), high speed of data processing in the system (important for monitoring behavior), low cost of the design and exploitation of the system on a farm (important for real application of the system). In addition, it is necessary to solve the following technical problems: determine the number of minimum required 3-D cameras and the correct location of the cameras, synchronize cameras, design efficient algorithms for processing the data captured from all cameras, and to determine whether the animal being measured should be fixed (motionless) during data collection.
3-D image generation techniques are critical to producing useful 3-D raw data. On the other hand, 3-D image processing techniques are important for extracting information from a 3-D image. In general, there are two models of an object for reconstructing its three-dimensional surface; that is, a rigid model, when the object is static and its shape does not change during data collection, and a non-rigid model, when the object can move and change its shape. Registration (aligning process) of two point clouds looks for a mapping between the template point cloud and target point cloud and describes the position of the semantically corresponding points. Registration can be seen as a warping of the template on the target. In the case of a non-rigid model, individual geometrical transformations are considered for each point of the template, and the registration algorithm must impose deformation constraints in order to select the correct deformation from all possible warps (Savran and Sankur, 2017). This can be done by registering the same template for multiple targets, which ensures consistent parametrization for all scans that then form a linear class of objects. For noise-free and complete data, the correct registration should be one-to-one. Registration can be done with a random sample consensus algorithm (RANSAC) (Schnabel et al., 2007), which usually works with features. RANSAC is fast and ensures correct registration in the presence of noisy data. However, it depends on the ratio between inliers and outliers. If there are much more outliers than inliers, the probability of finding the best solution is low. In addition, if the number of matched features is small, there is a high probability of obtaining a small amount of inliers. Existing three-dimensional visual systems for measuring animal features only use rigid animal models, and registration is performed using the iterative closest point (ICP) algorithm (Besl and McKay, 1992) for rigid objects. The ICP algorithm computes only one transformation for all template cloud points. First, it finds a preliminary set of matches by searching for the closest points to the template vertices on the target surface; then it looks for a transformation that aligns the template with those matches, and starts searching again with a new set of correspondences found from the vertices of the displaced template. However, incremental methods such as ICP algorithms achieve good results for small and smooth camera movements in rigid scenes. The disadvantage of this approach is that it is rather difficult to describe a non-rigid object (live animal) using such a model, since the animal is constantly moving, and its body shape is changing. In practice, surfaces contain holes and scan artefacts. Therefore, registration should be robust to outliers and be able to recover missing data (Ruchay et al., 2019).
The main contribution of this study is the design of an automated computer vision system that is able to generate of an accurate 3D model of live cattle based on RGB-D data. The keypoints of the used approach can be summarized as follows:
•Simple extrinsic calibration: extrinsic parameters of sensors with unknown arbitrary poses are well estimated using several steps of the rigid ICP algorithm.•Non-rigid registration: a non-rigid 3-D shape reconstruction algorithm utilizing data from three depth cameras generates an accurate 3-D model of live cattle.•Accuracy of contactless measurement: with a 90% confidence level, normalized measurement errors for all parameters that are important for body condition scoring in relation to manually measured references are less than 3%.•Variety of live animals: the proposed automated contactless system for estimation of cattle characteristics is suitable for various live animals.•Database creation: the database contains raw RGB-D images, point clouds, transformation matrices and manual measurements for 103 Hereford cattle.
The paper is organized as follows. Section 2 describes the used materials and methods, and also presents the proposed automated system for three-dimensional body measurements using three depth cameras. Results of real experiments are provided and discussed in Section 3. Finally, Section 4 summarizes our conclusions.
