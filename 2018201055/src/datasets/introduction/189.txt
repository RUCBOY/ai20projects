One of the main theoretical challenges facing modern cryptography is its vulnerability to future quantum computers. According to Shor’s algorithm [1], once quantum computers raise, most public key encryption algorithms will be decrypted in linear time. This is a major problem, not only affecting secure communication, but also protecting data – both future and current – bearing in mind that encrypted data can be stored.
To face the threats that quantum computing proffers over classical cryptography, we can use applications of quantum mechanics itself to implement new solutions. Quantum cryptography allows us to design algorithms that, on the one hand, manage to overcome the limitations of classical physics [2] and, on the other hand, are not vulnerable to attacks from quantum computers [3]. These protocols are based on sending and measuring light polarization on a fiber optic channel [4]. However, one of the main problems associated with these algorithms is the distribution of the so-called quantum keys, given their physical properties.
There are numerous successful experiments on quantum communication for sending keys at distances above 100 km on fiber optic channels such as those found in [4]. However, a realistic commercial environment requires distances below 50 km based on experiences [5] that can demonstrate that, at such distances with current commercial equipment (such as those manufactured by the company ID Quantique SA), the achieved results are remarkable.1 
Our main goal is to propose a novel methodology to create a distribution network of quantum keys that allows to provide service over a fiber optic network on a given territory (Section 4). The main problem of our network is to decide whether it is possible to set trusted repeaters on the quantum key distribution process, as those proposed by Salvail et al. [7], considering the current features of the provided fiber optic network (Section 2). To this end, this work focuses on a fiber optic network of a commercial operator on the territory of Castilla y León, Spain (Section 5.1). With this information, we propose a methodology based on clustering algorithms to minimize the number of quantum key repeaters on that specific territory, so our methodology does not only create the distribution network but also optimizes it. For the sake of the authors, this is the first work focused on designing large networks and distributing the repeaters inside the networks. With this approach we can extend the current networks, whose size is up to 10 nodes (Section 7) to networks with more than 200 nodes (Section 5).
In order to evaluate this methodology, a series of experiments have been carried out that simulate, on the aforementioned territory, how to create this distribution network (Section 5). In this case, two maximum distances between repeaters based on distances below 50 km have been considered. The first maximum distance is 35 km, and the second 45 km. These distance are boundaries for the theoretical and modulation error of the fiber optic channel (Section 3). The results show that for a network with a limit distance of 35 km, the entire territory of Castilla y León can be served using 100 repeaters. However, it is necessary to place a minimum of five repeaters outside the fiber optic service areas. In the case of a maximum distance of 45 km, it would suffice to use the available network by docking 100 repeaters on it. This would ensure secure communications using quantum encryption over all of Castilla y León, a territory that currently occupies 100,000 km2
 (Section 6).
For reproducibility purposes, we have published the data and the code for the experiments.2 
