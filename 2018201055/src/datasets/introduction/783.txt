With the rapid proliferation of both GPS-enabled mobile devices and online social media such as Twitter, Facebook and Sina Weibo, huge amounts of textual data are being generated with both spatial coordinates and timestamps. Such data, referred to as social posts, enables exciting real-time spatio-temporal-textual analytics such as detecting trending terms in an area [1], [2], [3], [4], [5]. These terms, which could include new hash tags and latent topics, can provide data scientists and journalists with early leads on current and emerging events.
Nowadays, more and more people use social networks such as Twitter to convey thoughts and interpret daily events taking place in the surrounding space. The regular and highlight events will get attention and have interest from many people. Social network users frequently post and share messages about the events, and the users discuss the events on social media, where the featured keywords related to the event will have a high frequency. Analysing the most frequent terms in social posts is crucial in many practical applications [1], [6], [7]. To illustrate, assume we would like to mine and analyse the social media data about points of interests (interesting places) to give visitors a panoramic view of outstanding events related to the location that they are interested in. When tourists visit a place, they are not only interested in recent events [3], but they also would like to explore highlight events and features that have occurred in the place’s ambiguously-defined “past”. Particularly for tourists with little prior knowledge of a place, defining the boundaries of the minimally-queryable-yet-equally-relevant past is much more difficult and offers less chance for serendipity than simply expressing a greater interest towards one event A that is more recent than another event B, all else being equal between them. Considering the entire time frame of events but decaying event relevance based on recency produces results that exhibit both completeness and freshness.
Typically, detecting trending terms consists of finding the k terms used most often in social posts within a user-specified spatio-temporal range. However, as Fig. 1 illustrates, this straight-forward frequency-based approach has its limitations. The figure shows a tag cloud created based on the thirty most popular terms from a subset of tweets from Oslo and London that were posted during the week between Christmas and New Year’s Eve. Although some temporally-specific terms, such as “jul”, “christmas” and “star” are visible, they are limited and vastly overshadowed by always-frequent terms, such as “oslo”, “london”, “norway”, “uk”, “great”, and “photo”. One approach is to normalize the term counts by their overall frequency (e.g., [8]) to discard always-frequent terms, but this biases towards always-infrequent terms. Another approach is to manipulate the temporal range, but this may yield stale (if the range is expanded) or incomplete (if it is shrunk) results.
To circumvent these challenges, this work introduces and studies a query operator that applies a decaying, time weighted frequency term; this assigns an exponentially higher score to terms posted most recently. The effect is visible in Fig. 1 (right): we queried Oslo and London within a time window from 2015-12-25 to 2016-01-01 (New Year’s Eve), but used decay factors on the term scores to give the newer terms more weight than the old terms; the result gives much higher weight to the already present juletide terms, but also includes many other specific festive terms, such as “2015-12-25”, “family”, “feliz”, and “jesus”.
Investigating decay factors as weighing mechanism for term querying from spatio-temporal textual streams is an interesting challenge. It is computationally more challenging than using a temporal range, because evaluating the score of a term: (a) is dependent on when the query is issued; and (b) may involve arbitrarily old social posts. A straightforward method may be to use a spatio-textual index to retrieve spatially relevant social posts, and then evaluate the score of each retrieved term. However, this is expensive because the collection of social posts that satisfy the spatial constraints could be huge. To compound the challenge, existing approaches for evaluating straight-forward frequencies within a spatio-temporal range assume a static, disc-based setting [1], which ignores that this spatio-temporal-textual data arrives at a rate of thousands of records per second; otherwise, they assume a streaming data model [2], [3], [4], [5], which necessitates an explicit temporal range.Download : Download high-res image (428KB)Download : Download full-size imageFig. 1. The 30 most common terms around time window New Year’s Eve using a spatio-temporal range (left) in Oslo (top) and London (bottom) or an exponentially decaying freshness function (right), as in this paper.
We thus propose a new indexing technique to efficiently update and query social posts to retrieve fresh, complete, spatio-temporally relevant terms. It is based on a time-weighted term list that maintains terms sorted by occurrence relevant to a landmark epoch. This allows us to process a query with classic aggregation algorithms, such as TA [9] or BPA [10]. Our idea is sufficiently general that it can be applied to various spatial indexing structures. We evaluate our technique, applied to both the space partitioning quad-tree and the more ubiquitous R-tree. While both methods outperform a competitive baseline by several orders of magnitude, the quad-tree version achieves much better performance than the R-tree by minimizing the number of time-weighted term lists that need to be aggregated. To this end, our main contributions are:

•We introduce, for the first time in the literature, a location-based time-decaying query to retrieve recently frequent terms within a user specified region of interest, and we propose both exact and approximate algorithms to address it efficiently;•We introduce the time-weighted term list structure (TwTL) to enable both quad-trees and R-trees to index social post streams;•We demonstrate how to support fast digestion of social streams with a batch insertion of simultaneous Morton encoding and time-weighted frequency pre-calculation;•We perform an extensive experimental evaluation on both real-world and synthetic data to evaluate query response performance and index cost. The results show that our methods are highly efficient in terms of query response time, accuracy and scalability.
Reproducibility: The source code used in this paper is publicly available on GitHub.1 
The rest of this paper is organized as follows. In Section 2, we briefly present related work. In Section 3, we define the problem and introduce preliminaries. In Section 4, we present the index construction and query operations. In Section 5, we report and discuss the experimental results. Finally, in Section 6, we conclude the paper.
